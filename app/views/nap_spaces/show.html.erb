<div class="container">
  <br>
  <p style="color: green"><%= notice %></p>
  <%# Display Nap Space Card %>
  <div class="container">
    <%= render @nap_space %>

    <%# buttons %>
    <div class="d-flex align-items-center flex-wrap pb-2">
      <div class="p-1">
        <%= link_to "Book this space 🗓", new_nap_space_booking_path(@nap_space) , class: "btn btn-primary mt-2" %>
      </div>
      <% if @nap_space.user == @current_user %>
        <div class="p-1">
          <%= link_to "Edit NapSpace", edit_nap_space_path(@nap_space), class: "btn btn-warning  mt-2"  %>
        </div>
        <div class="p-1">
          <%= link_to "Delete Nap Space",
                    nap_space_path(@nap_space),
                    data: {turbo_method: :delete, turbo_confirm: "Are you sure?" },
                    class: "btn btn-danger  mt-2"
                  %>
        </div>
      <% end %>
      <div class="p-1">
        <%= link_to "Back to search 🔎", nap_spaces_path , class: "btn btn-secondary mt-2" %>
      </div>
      <div class="p-1">
        <%= link_to "Home 🏠", root_path , class: "btn btn-secondary mt-2" %>
      </div>
    </div>

    <hr>
    <%# List all reviews %>
    <div>
      <div class="pt-2">
        <h3>Reviews 🌟</h3>
      </div>
      <div class="d-flex align-items-center flex-wrap pt-3">
        <% @bookings.each do |booking|%>
            <% if booking.review %>
              <div class="pr-2">
                <div class="card rounded border-0 shadow">
                  <div class="card-body">
                    <h6 class="card-title"><%= current_user.name %> </h6>
                    <div class="card-subtitle py-1">
                      <% booking.review.rating.times do %>
                      <span style="color: #ebc934">
                        <i class="fa fa-star" aria-hidden="true" ></i>
                      </span>
                      <% end %>
                    </div>
                    <p class="card-text py-1"><em> <%= booking.review.content %> </em></p>
                  </div>
                </div>
              </div>
            <% end %>
        <% end %>
      </div>
    </div>

    <%# render map %>
    <div class="my-4 rounded border-0 shadow overflow-hidden"
    style="width: 100%; height: 600px;"
    data-controller="map"
    data-map-markers-value="<%= @marker.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  </div>
</div>
